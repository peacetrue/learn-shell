= 常用场景

== 安装自定义脚本

为了方便，编写了一些脚本。希望在任何环境都能快速使用这些脚本，所以提供了一个安装命令 `ptinstalls`，用于安装这些脚本。

为了使用 `ptinstalls`，需要检出 https://github.com/peacetrue/learn-shell[learn-shell^] 资源库。

以下是一键安装命令：

[source%nowrap,bash]
----
git clone https://github.com/peacetrue/learn-shell.git && cd learn-shell/docs/antora/modules/ROOT/assets/attachments/peacetrue && chmod 777 ./ptinstalls && chmod 777 ./ptinstall && ./ptinstalls
----

== 删除 IDEA 配置文件

IDEA 的配置文件分为两类：

. 目录类：.idea
. 文件类：\*.iml、*.ipr、*.iws
//TODO 配置文件名称很长需要截图实证

之前使用文件类配置比较多，但文件类配置有时候配置文件名称很长，就想改用目录类配置。这样需要把文件类配置都删除，重新以目录类配置创建项目，怎么快捷的删除文件类配置呢？

[source%nowrap,bash]
----
find . -name *.iml -o -name *.ipr -o -name *.iws //<1>
find . -name "*.iml" -o -name "*.ipr" -o -name "*.iws" //<2>
find . \( -name "*.iml" -o -name "*.ipr" -o -name "*.iws" \) //<3>
find . \( -name "*.iml" -o -name "*.ipr" -o -name "*.iws" \) -exec rm -rf {} +; //<4>
----
<1> 查找名称以 iml、ipr、iws 结尾的文件
<2> 类似于 <1>，<1> 找不到文件会报错，<2> 不会
<3> 类似于 <2>，并将找到的所有配置文件作为后续命令的参数，否则只会将 *.iml 作为参数
<4> 基于 <3> 追加删除操作

== 查找并替换内容

sed -i "" 's|{type:"2",isRequestDataType:"2"}|{type:"2",isRequestDataType:"2",dueTotAmt:number}|g' `grep '{type:"2",isRequestDataType:"2"}' -rl .`

== 删除所有日志目录

本地项目目录结构如下：

[source%nowrap]
----
peacetrue-microservice
├── peacetrue-microservice-authorization-server
│   ├── logs
├── peacetrue-microservice-client
│   ├── logs
├── peacetrue-microservice-client-oauth2login
│   ├── logs
├── peacetrue-microservice-client-outer
│   ├── logs
----

删除所有日志命令为：`rm -r `find . -name logs``
